angular.module("trail",["ngMaterial","nsPopover"]),function(e,t,n){"use strict";var o=t.module("nsPopover",[]),i=t.element,r=t.isDefined,c=[],a=0;o.provider("nsPopover",function(){var e={template:"",theme:"ns-popover-list-theme",plain:"false",trigger:"click",triggerPrevent:!0,angularEvent:"",scopeEvent:"",container:"body",placement:"bottom|left",timeout:1.5,hideOnInsideClick:!1,hideOnOutsideClick:!0,hideOnButtonClick:!0,mouseRelative:"",popupDelay:0};this.setDefaults=function(n){t.extend(e,n)},this.$get=function(){return{getDefaults:function(){return e}}}}),o.controller("clientCtrl",function(){var e=this;e.tracks=[{id:"TST1",icon:"date_range",text:"TST1",time:"",styleClass:"md-warn",click:function(){}},{id:"",icon:"looks_one",text:"Segundo nodo da lista",time:"",styleClass:"md-warn",click:function(){e.add()}},{id:"",icon:"exposure_zero",text:"Terceira opção",time:"",styleClass:"md-warn"},{id:"",icon:"radio_button_checked",text:"Ultima.",time:"",styleClass:"md-warn"}],e.add=function(){var t={id:"",icon:"looks_one",text:"Segundo nodo da lista",time:"",styleClass:"md-warn",click:function(){console.log("oi")}};e.tracks.push(t)}}),o.directive("nsPopover",["nsPopover","$rootScope","$timeout","$templateCache","$q","$http","$compile","$document","$parse",function(o,l,s,p,d,u,m,v,g){return{restrict:"A",scope:!0,link:function(h,f,y){function k(e,t,n,o,i){var r,c,a=O(e[0]),l=function(){return"center"===n?Math.round(o.left+o.width/2-a.width/2):"right"===n?o.right-a.width:o.left},s=function(){return"center"===n?Math.round(o.top+o.height/2-a.height/2):"bottom"===n?o.bottom-a.height:o.top};"top"===t?(r=o.top-a.height,c=l()):"right"===t?(r=s(),c=o.right):"bottom"===t?(r=o.bottom,c=l()):"left"===t&&(r=s(),c=o.left-a.width),e.css("top",r.toString()+"px").css("left",c.toString()+"px"),i&&("top"===t||"bottom"===t?(c=o.left+o.width/2-c,i.css("left",c.toString()+"px")):(r=o.top+o.height/2-r,i.css("top",r.toString()+"px")))}function P(e,t,n,o){var i={bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width};return t&&(i.left=o.pageX,i.right=o.pageX,i.width=0),n&&(i.top=o.pageY,i.bottom=o.pageY,i.height=0),i}function O(t){var n=e,o=document.documentElement||document.body.parentNode||document.body,i=r(n.pageXOffset)?n.pageXOffset:o.scrollLeft,c=r(n.pageYOffset)?n.pageYOffset:o.scrollTop,a=t.getBoundingClientRect();return i||c?{bottom:a.bottom+c,left:a.left+i,right:a.right+i,top:a.top+c,height:a.height,width:a.width}:a}function b(e){if(e&&0!==e.length){var t=(""+e).toLowerCase();e="true"==t}else e=!1;return e}function C(e,n){return e?t.isString(e)&&n?e:p.get(e)||u.get(e,{cache:!0}):""}function w(){Y.isOpen&&D.hide(0)}function x(e){function n(e){if(e.id===o)return!0;var i=t.element(e).parent()[0];return!!i&&(i.id===o||n(i))}if(Y.isOpen&&e.target!==f[0]){var o=Y[0].id;n(e.target)||D.hide(0)}}function $(){Y.isOpen&&D.hide(0)}var E=o.getDefaults(),_={template:y.nsPopoverTemplate||E.template,theme:y.nsPopoverTheme||E.theme,plain:b(y.nsPopoverPlain||E.plain),trigger:y.nsPopoverTrigger||E.trigger,triggerPrevent:y.nsPopoverTriggerPrevent||E.triggerPrevent,angularEvent:y.nsPopoverAngularEvent||E.angularEvent,scopeEvent:y.nsPopoverScopeEvent||E.scopeEvent,container:y.nsPopoverContainer||E.container,placement:y.nsPopoverPlacement||E.placement,timeout:y.nsPopoverTimeout||E.timeout,hideOnInsideClick:b(y.nsPopoverHideOnInsideClick||E.hideOnInsideClick),hideOnOutsideClick:b(y.nsPopoverHideOnOutsideClick||E.hideOnOutsideClick),hideOnButtonClick:b(y.nsPopoverHideOnButtonClick||E.hideOnButtonClick),mouseRelative:y.nsPopoverMouseRelative,popupDelay:y.nsPopoverPopupDelay||E.popupDelay,group:y.nsPopoverGroup};_.mouseRelative&&(_.mouseRelativeX=_.mouseRelative.indexOf("x")!==-1,_.mouseRelativeY=_.mouseRelative.indexOf("y")!==-1);var S={id_:n,display:function(e,t){g(y.nsPopover)(h)!==!1&&(s.cancel(S.id_),r(e)||(e=0),_.group&&l.$broadcast("ns:popover:hide",_.group),S.id_=s(function(){Y.isOpen=!0,Y.css("display","block");var e=O(f[0]);_.mouseRelative&&(e=P(e,_.mouseRelativeX,_.mouseRelativeY,t)),k(Y,B,X,e,T),_.hideOnInsideClick&&Y.on("click",w),_.hideOnOutsideClick&&v.on("click",x),_.hideOnButtonClick&&f.on("click",$)},1e3*e))},cancel:function(){s.cancel(S.id_)}},D={id_:n,hide:function(e){s.cancel(D.id_),"-1"!==e&&(r(e)||(e=1.5),D.id_=s(function(){Y.off("click",w),v.off("click",x),f.off("click",$),Y.isOpen=!1,S.cancel(),Y.css("display","none")},1e3*e))},cancel:function(){s.cancel(D.id_)}},R=v.find(_.container);R.length||(R=v.find("body"));var T,B,X;a+=1;var Y=i('<div id="nspopover-'+a+'"></div>');c.push(Y);var I=_.placement.match(/^(top|bottom|left|right)$|((top|bottom)\|(center|left|right)+)|((left|right)\|(center|top|bottom)+)/);if(!I)throw new Error('"'+_.placement+'" is not a valid placement or has a invalid combination of placements.');B=I[6]||I[3]||I[1],X=I[7]||I[4]||I[2]||"center",d.when(C(_.template,_.plain)).then(function(e){e=t.isString(e)?e:e.data&&t.isString(e.data)?e.data:"",Y.html(e),_.theme&&Y.addClass(_.theme),Y.addClass("ns-popover-"+B+"-placement").addClass("ns-popover-"+X+"-align"),m(Y)(h),h.$on("$destroy",function(){Y.remove()}),h.hidePopover=function(){D.hide(0)},h.$on("ns:popover:hide",function(e,t){_.group===t&&h.hidePopover()}),Y.css("position","absolute").css("display","none"),T=Y[0].querySelectorAll(".triangle"),T.length&&(T=i(T)),R.append(Y)}),_.angularEvent?l.$on(_.angularEvent,function(){D.cancel(),S.display(_.popupDelay)}):_.scopeEvent?h.$on(_.scopeEvent,function(){D.cancel(),S.display(Y,_.popupDelay)}):f.on(_.trigger,function(e){!1!==_.triggerPrevent&&e.preventDefault(),D.cancel(),S.display(_.popupDelay,e)}),f.on("mouseout",function(){D.hide(_.timeout)}).on("mouseover",function(){D.cancel()}),Y.on("mouseout",function(e){D.hide(_.timeout)}).on("mouseover",function(){D.cancel()})}}}])}(window,window.angular),angular.module("trail").directive("otusTrail",function(){return{template:'<div layout-align="center center" layout="column"><md-button class="md-fab md-primary"><md-icon >question_answer</md-icon></md-button><div layout-align="center" ng-repeat="content in nodes"><section flex class="timeLine"></section><div layout="row" layout-align="center center"><div id="stepButtons"><md-button ng-click="content.click(content)" ns-popover ns-popover-template="tooltip" ns-popover-trigger="mouseover"ns-popover-theme="ns-popover-tooltip-theme" ns-popover-timeout="0.1"ns-popover-placement="right" ng-class="content.styleClass" class="md-fab md-mini"><md-icon>{{content.icon}}</md-icon></md-button></div><div><span>{{content.time}}</span></div></div><script type="text/ng-template" id="tooltip"><div class="triangle"></div><div class="md-body-2 ns-popover-tooltip">{{content.text+i}}</div></script></div></div',restrict:"E",scope:{nodes:"="}}});